<div class="mat-card mt-4 ">
  <div class="mat-elevation-z8 table-responsive pt-4 ">
    <div class="d-flex justify-content-around align-items-center mb-4 flex-wrap ">
      <button mat-flat-button color="primary" (click)="AddNewRow()">
        + Add Row
      </button>
      <mat-form-field style="width: 40%">
        <mat-label>Filter</mat-label>
        <input matInput [(ngModel)]="searchText" placeholder="Ex. ium" #input>
      </mat-form-field>
      <button mat-flat-button color="primary" (click)="openDialog()">Add Sponsor</button>

    </div>
    <form [formGroup]="VOForm" autocomplete="off" class="table-responsive">
      <ng-container formArrayName="VORows">
        <table #table mat-table [dataSource]="dataSource | tableFilter :   searchText " class="mat-elevation-z8"
               matSort>
          <!-- Position Column -->
          <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> No.</th>
            <td mat-cell *matCellDef="let element; let i = index" [formGroup]="element">
              <mat-form-field style="width: 50px;">
                <input matInput type="text" formControlName="position" [readonly]="true">
              </mat-form-field>
          </ng-container>
          <ng-container matColumnDef="sponsor_name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Sponsor Name</th>
            <td mat-cell *matCellDef="let element; let i = index" [formGroup]="element">

              <!-- <span [hidden]="VOForm.get('VORows').value[i].isEditable"> -->
              <mat-form-field class="example-full-width"
                              [appearance]="VOForm.get('VORows')?.value[i]?.isEditable? 'outline' : 'fill'">
                <input matInput type="text" formControlName="sponsor_name"
                       [readonly]="VOForm.get('VORows')?.value[i]?.isEditable">
              </mat-form-field>
              <!-- </span> -->

            </td>
          </ng-container>
          <ng-container matColumnDef="sponsor_type">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Sponsor Type</th>
            <td mat-cell *matCellDef="let element; let i = index" [formGroup]="element">
              <mat-form-field
                [appearance]="VOForm.get('VORows')?.value[i]?.isEditable? 'outline' : 'fill'">
                <input matInput type="text" readonly formControlName="sponsor_type"
                       *ngIf="VOForm.get('VORows')?.value[i].isEditable">
                <mat-select formControlName="sponsor_type" *ngIf="!VOForm.get('VORows')?.value[i].isEditable">
                  <mat-option [value]="'legal'">legal</mat-option>
                  <mat-option [value]="'normal'">normal</mat-option>
                </mat-select>
              </mat-form-field>
              <!-- </span> -->
            </td>
          </ng-container>
          <ng-container matColumnDef="sponsor_ID">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Sponsor ID</th>
            <td mat-cell *matCellDef="let element; let i = index" [formGroup]="element">
              <mat-form-field
                [appearance]="VOForm.get('VORows')?.value[i].isEditable? 'outline' : 'fill'">
                <input matInput type="text" formControlName="sponsor_ID"
                       [readonly]="VOForm.get('VORows')?.value[i].isEditable">
              </mat-form-field>
              <!-- </span> -->
            </td>
          </ng-container>
          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Email</th>
            <td mat-cell *matCellDef="let element; let i = index" [formGroup]="element">
              <mat-form-field
                [appearance]="VOForm.get('VORows')?.value[i].isEditable? 'outline' : 'fill'">
                <input matInput type="text" formControlName="email"
                       [readonly]="VOForm.get('VORows')?.value[i].isEditable">
              </mat-form-field>
              <!-- </span> -->
            </td>
          </ng-container>
          <ng-container matColumnDef="phone">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Phone</th>
            <td mat-cell *matCellDef="let element; let i = index" [formGroup]="element">
              <mat-form-field
                [appearance]="VOForm.get('VORows')?.value[i]?.isEditable? 'outline' : 'fill'">
                <input matInput type="text" formControlName="phone"
                       [readonly]="VOForm.get('VORows')?.value[i].isEditable">
              </mat-form-field>
              <!-- </span> -->
            </td>
          </ng-container>
          <ng-container matColumnDef="address">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Adress</th>
            <td mat-cell *matCellDef="let element; let i = index" [formGroup]="element">
              <mat-form-field
                [appearance]="VOForm.get('VORows')?.value[i].isEditable? 'outline' : 'fill'">
                <input matInput type="text" formControlName="address"
                       [readonly]="VOForm.get('VORows')?.value[i].isEditable">
              </mat-form-field>
            </td>
          </ng-container>
          <ng-container matColumnDef="max_limit">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Max Limit</th>
            <td mat-cell *matCellDef="let element; let i = index" [formGroup]="element">
              <mat-form-field style=""
                              [appearance]="VOForm.get('VORows')?.value[i].isEditable? 'outline' : 'fill'">
                <input matInput type="text" formControlName="max_limit"
                       [readonly]="VOForm.get('VORows')?.value[i].isEditable">
              </mat-form-field>
              <!-- </span> -->
            </td>
          </ng-container>
          <ng-container matColumnDef="financial_limit">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Financial Limit</th>
            <td mat-cell *matCellDef="let element; let i = index" [formGroup]="element">
              <!-- <span [hidden]="VOForm.get('VORows').value[i].isEditable"> -->
              <mat-form-field
                [appearance]="VOForm.get('VORows')?.value[i].isEditable? 'outline' : 'fill'">
                <input matInput type="text" formControlName="financial_limit"
                       [readonly]="VOForm.get('VORows')?.value[i].isEditable">
              </mat-form-field>
              <!-- </span> -->
            </td>
          </ng-container>
          <ng-container matColumnDef="time_limit">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Time Limit</th>
            <td mat-cell *matCellDef="let element; let i = index" [formGroup]="element">
              <!-- <span [hidden]="VOForm.get('VORows').value[i].isEditable"> -->
              <mat-form-field
                [appearance]="VOForm.get('VORows')?.value[i].isEditable? 'outline' : 'fill'">
                <input matInput type="text" formControlName="time_limit"
                       [readonly]="VOForm.get('VORows')?.value[i].isEditable">
              </mat-form-field>
              <!-- </span> -->
            </td>
          </ng-container>
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Action</th>
            <td class="d-flex align-items-center " mat-cell *matCellDef="let element; let i = index"
                [formGroup]="element">
              <button mat-icon-button class="material-icons app-toolbar-menu save-button"
                      matTooltip="Save Changes" (click)="SaveVO(VOForm,i)"
                      *ngIf="!VOForm.get('VORows')?.value[i].isEditable" color="primary">
                <mat-icon>check_circle</mat-icon>
              </button>

              <button mat-icon-button class="material-icons app-toolbar-menu cancel-button"
                      matTooltip="Cancel Changes" color="warn"
                      (click)="CancelSVO(VOForm,i)"
                      *ngIf="!VOForm.get('VORows')?.value[i].isEditable">
                <mat-icon>cancel</mat-icon>
              </button>

              <button mat-icon-button class="material-icons app-toolbar-menu save-button"
                      *ngIf="VOForm.get('VORows')?.value[i].isEditable"
                      matTooltip="Edit" color="primary" (click)="EditSVO(VOForm,i)">
                <mat-icon>edit</mat-icon>
              </button>

              <button mat-icon-button class="material-icons app-toolbar-menu delete-button"
                      *ngIf="VOForm.get('VORows')?.value[i].isEditable"
                      matTooltip="Delete" color="warn">
                <mat-icon>delete</mat-icon>
              </button>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row class="mt-2" *matRowDef="let row; columns: displayedColumns;"></tr>
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
          </tr>
          <tr>
            <div>item</div>
          </tr>
        </table>
      </ng-container>
    </form>
    <mat-card *ngIf="isLoading" style="display: flex; justify-content: center; align-items: center">
    </mat-card>
    <mat-paginator [pageSizeOptions]="[5, dataSource.data.length>8? dataSource.data.length:''  ]" showFirstLastButtons>
    </mat-paginator>
  </div>

</div>
